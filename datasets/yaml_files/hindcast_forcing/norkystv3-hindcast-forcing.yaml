dates:
  start: '2017-01-01T00:00:00'
  end: '2018-01-01T00:00:00'
  frequency: 3h
  missing: 
  - 2017-01-01 03:00:00
  - 2017-01-01 06:00:00
  - 2017-01-23 15:00:00
  - 2017-01-23 18:00:00
  - 2017-04-06 09:00:00
  - 2017-04-06 12:00:00
  - 2017-04-06 15:00:00
  - 2017-04-06 18:00:00
  - 2017-04-06 21:00:00
  - 2017-04-07 00:00:00
  - 2017-04-14 15:00:00
  - 2017-04-14 18:00:00
  - 2017-05-09 09:00:00
  - 2017-05-09 12:00:00
  - 2017-06-08 03:00:00
  - 2017-06-08 06:00:00
  - 2017-06-08 09:00:00
  - 2017-06-08 12:00:00
  - 2017-07-05 03:00:00
  - 2017-07-05 06:00:00
  - 2017-07-05 09:00:00
  - 2017-07-05 12:00:00
  - 2017-07-23 09:00:00
  - 2017-07-23 12:00:00
  - 2017-08-09 09:00:00
  - 2017-08-09 12:00:00
  - 2017-09-02 15:00:00
  - 2017-09-02 18:00:00
  - 2017-09-17 21:00:00
  - 2017-09-18 00:00:00
  - 2017-09-25 21:00:00
  - 2017-09-26 00:00:00
  - 2017-09-26 21:00:00
  - 2017-09-27 00:00:00
  - 2017-09-27 21:00:00
  - 2017-09-28 00:00:00
  - 2017-09-28 09:00:00
  - 2017-09-28 12:00:00
  - 2017-09-28 21:00:00
  - 2017-09-29 00:00:00
  - 2017-10-01 03:00:00
  - 2017-10-01 06:00:00
  - 2017-10-11 21:00:00
  - 2017-10-12 00:00:00
  - 2017-10-12 15:00:00
  - 2017-10-12 18:00:00
  - 2017-10-12 21:00:00
  - 2017-10-13 00:00:00
  - 2017-10-13 15:00:00
  - 2017-10-13 18:00:00
  - 2017-10-13 21:00:00
  - 2017-10-14 00:00:00
  - 2017-10-22 21:00:00
  - 2017-10-23 00:00:00
  - 2017-10-23 09:00:00
  - 2017-10-23 12:00:00
  - 2017-10-23 15:00:00
  - 2017-10-23 18:00:00
  - 2017-12-01 03:00:00
  - 2017-12-01 06:00:00
build:
  group_by: 24
statistics:
  allow_nans: []

input:
  join:
  - netcdf:
      path: /lustre/storeB/project/fou/hi/foccus/datasets/norkyst-v3-hindcast/interp_forcings/arome_meps_2_5km_2017*
      param:
      - Pair
      - Qair
      - Tair
      - Uwind
      - Vwind
      - cloud
      - rain
  - constants:
      param:
      - cos_latitude
      - cos_longitude
      - sin_latitude
      - sin_longitude
      - cos_julian_day
      - cos_local_time
      - sin_julian_day
      - sin_local_time
      - insolation
      template: ${input.join.0.netcdf}
  - repeated_dates:
      mode: constant
      source:
        netcdf:
          path: /lustre/storeB/project/fou/hi/foccus/datasets/river_positions.nc
          param:
          - river_binary_mask
  - repeated_dates:
      mode: constant
      source:
        netcdf:
          path: /lustre/storeB/project/fou/hi/foccus/datasets/f.nc
          param:
          - f
